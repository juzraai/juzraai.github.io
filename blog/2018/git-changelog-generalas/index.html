<!DOCTYPE html> <html lang="hu"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta http-equiv="X-UA-Compatible" content="ie=edge"> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>Git changelog gener√°l√°s | Zsolt Jur√°nyi (juzraai)</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Git changelog gener√°l√°s" /> <meta name="author" content="Zsolt Jur√°nyi" /> <meta property="og:locale" content="hu_HU" /> <meta name="description" content="‚Ä¶" /> <meta property="og:description" content="‚Ä¶" /> <link rel="canonical" href="https://juzraai.github.io/blog/2018/git-changelog-generalas/" /> <meta property="og:url" content="https://juzraai.github.io/blog/2018/git-changelog-generalas/" /> <meta property="og:site_name" content="Zsolt Jur√°nyi (juzraai)" /> <meta property="og:image" content="https://juzraai.github.io/assets/facebook-og-image.png" /> <meta property="og:image:height" content="630" /> <meta property="og:image:width" content="1200" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2018-12-15T00:00:00+01:00" /> <script type="application/ld+json"> {"description":"‚Ä¶","author":{"@type":"Person","name":"Zsolt Jur√°nyi"},"@type":"BlogPosting","url":"https://juzraai.github.io/blog/2018/git-changelog-generalas/","image":{"width":1200,"height":630,"url":"https://juzraai.github.io/assets/facebook-og-image.png","@type":"imageObject"},"headline":"Git changelog gener√°l√°s","dateModified":"2018-12-16T01:28:27+01:00","datePublished":"2018-12-15T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://juzraai.github.io/blog/2018/git-changelog-generalas/"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <meta property="og:image:type" content="image/png" /> <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"> <link rel="manifest" href="/site.webmanifest"> <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#016fb9"> <meta name="msapplication-TileColor" content="#016fb9"> <meta name="theme-color" content="#016fb9"> <link type="application/atom+xml" rel="alternate" href="https://juzraai.github.io/feed.xml" title="Zsolt Jur√°nyi (juzraai)" /> <link rel="dns-prefetch" href="//fonts.googleapis.com/"> <link rel="dns-prefetch" href="//cdnjs.cloudflare.com"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Barlow+Condensed:300,300i,400,500,600|Inconsolata:400,700&amp;subset=latin-ext" /> <link rel="stylesheet" href="/assets/page.css" /> </head> <body> <nav class="navbar navbar-expand-lg navbar-dark bg-dark"> <div class="container"> <a class="navbar-brand" href="/">Zsolt</a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <div class="collapse navbar-collapse" id="navbarSupportedContent"> <ul class="navbar-nav mr-auto w-100"> <li class="nav-item"> <a class="nav-link" href="/projects/hu/" target="">Munk√°im</a> </li> <li class="nav-item"> <a class="nav-link" href="/blog/hu/" target="">Feljegyz√©seim</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/juzraai" target="_blank">GitHub</a> </li> <li class="nav-item"> <a class="nav-link" href="/contact/hu/" target="">Kontakt</a> </li> </ul> </div> </div> </nav> <div class="container"> <div class="row my-5 border-bottom"> <div class="col"> <div class="mb-3 text-muted"> Dec 15, 2018 / <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/bash/">#bash</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/changelog/">#changelog</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/commit/">#commit</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/generator/">#generator</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/git/">#git</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/markdown/">#markdown</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/log/">#log</a> <a class="d-inline-block mr-1 mb-1" href="/blog/hu/tag/script/">#script</a> </div> <h1>Git changelog gener√°l√°s</h1> </div> </div> <div class="row"> <div class="col content"> <ul class="list-unstyled mb-5 toc"> <li><a href="#bevezet√©s">Bevezet√©s</a></li> <li><a href="#c√©lkit≈±z√©s">C√©lkit≈±z√©s</a></li> <li><a href="#k√≠s√©rletez√©s">K√≠s√©rletez√©s</a></li> <li><a href="#√∂sszekalap√°l√°s">√ñsszekalap√°l√°s</a></li> <li><a href="#epilog">EpiLog</a></li> </ul> <h2 id="bevezet√©s">Bevezet√©s</h2> <p>B√∂ng√©szgettem GitHub-on, √©s felfigyeltem r√°, hogy sok rep√≥ban van <strong>changelog f√°jl</strong> vagy fejezet a readme-ben. A changelog egy <strong>hasznos dolog, t√°j√©koztatja</strong> a felhaszn√°l√≥t (vagy fejleszt≈ët) az egyes verzi√≥k k√ºl√∂nbs√©geir≈ël, a <strong>bek√∂vetkezett v√°ltoz√°sokr√≥l.</strong> Ha el√©g √ºgyesek vagyunk, ezt a napl√≥t megfelel≈ë tool seg√≠ts√©g√©vel le is tudjuk gener√°lni. A j√≥ changelog ir√°nyelveit a <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a> oldal √≠rja le, szem el≈ëtt tartva √∫gy a napl√≥ olvashat√≥s√°g√°t √©s √©rtelm√©t, mint pedig a gener√°lhat√≥s√°g√°t (ld. commit message prefixek).</p> <p>Namost a linken √≠rtakat most olvastam el, miut√°n a posztom v√°zlat√°t meg√≠rtam‚Ä¶ √©s a helyzet az, hogy <strong>a bejegyz√©s tov√°bbi r√©sze szembemegy az ir√°nyelvekkel.</strong> Ez kiss√© tal√°n lelomboz, viszont ett≈ël m√©g nem haszontalan megosztanom a <del>mai szenved√©sem</del> ma szerzett tapasztalataimat a <code class="highlighter-rouge">git log</code> paranccsal.</p> <h2 id="c√©lkit≈±z√©s">C√©lkit≈±z√©s</h2> <p>A dolog ott indul, hogy a <a href="/blog/2018/dijnet-bot/">D√≠jnet bothoz</a> gondoltam changelog-ot gener√°lni. A <a href="https://github.com/juzraai/dijnet-bot">rep√≥r√≥l</a> azt kell most tudni, hogy a commit message-eket kiv√©telesen magyarul √≠rom. <strong>A c√©lom pedig az, hogy a changelog tartalmazza az √∂sszes commit-ot, release-enk√©nt csoportos√≠tva.</strong> (v√∂. a fentebb linkelt ir√°nyelvekkel)</p> <p>Keresg√©ltem l√©tez≈ë gener√°torokat, kett≈ët emeln√©k ki:</p> <ul> <li><a href="https://github.com/github-changelog-generator/github-changelog-generator">github-changelog-generator</a> - Ennek van a legt√∂bb csillaga, viszont nekem (most) nem megfelel≈ë, mert <strong>GitHub Issues-b√≥l dolgozik,</strong> amit nem haszn√°lok a fent eml√≠tett rep√≥ban.</li> <li><a href="https://github.com/git-chglog/git-chglog/">git-chglog</a> - Ez kev√©sb√© n√©pszer≈±, viszont nagyon szimpatikus, mert a <strong>git history-b√≥l dolgozik,</strong> egyetlen bin√°risb√≥l √°ll, k√∂nnyen <strong>testreszabhat√≥</strong> √©s config gener√°tora is van. Ugyanakkor kipr√≥b√°ltam, √©s nem azt kapom, amit v√°rok. Ha kikapcsolom a commit type detekt√°l√°st (message els≈ë szava alapj√°n csoportos√≠t√°s), akkor konkr√©tan √ºres lesz a gener√°lt napl√≥.</li> </ul> <p>Sz√≥val neki√ºltem saj√°t szkriptet √≠rni.</p> <h2 id="k√≠s√©rletez√©s">K√≠s√©rletez√©s</h2> <p>El≈ësz√∂r n√©zz√ºk, mivel √°llunk szemben. √çgy n√©z ki a teljes log:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --oneline
b323e7d (HEAD -&gt; master, single-inst) Lint
73a4bcd Csak egy instance maradhat
bf4a37f Szkriptek src mapp√°ba (√°tl√°that√≥s√°g++)
7c1fdb0 (tag: 1.0.1, origin/master, origin/HEAD) Logger konfig itt jobb helyen van
e724f7e Glob√°lis install m≈±k√∂dik
c8d7518 (tag: 1.0.0) Dependency update
e7e9abb K√©p URL fix
f4a4114 Feladatok, √∂tletek
3655263 Doksi
51c3039 Sleep konfigban, exit code
2f6669e F√°jlba ment√©s opcion√°lis, log level √°ll√≠that√≥
80d90db Lint
285f280 Iter√°ci√≥ m≈±k√∂dik
f929777 Sz√°mla f√°jlok let√∂lt√©se
d207817 Let√∂lt≈ë linkek parszol√°sa
39d0ae8 Sz√°mla kiv√°laszt√°s, f√°jlba ment√©s
f463a50 Sz√°mla alapadatok parszol√°sa
cd4e40e szamla_search_submit
2ebca86 Login, szamla_search
ff608c9 Logger
5fa1938 Initial commit
</code></pre></div></div> <p>Kipr√≥b√°ltam a <code class="highlighter-rouge">git log</code> parancsot, √©s a <code class="highlighter-rouge">&lt;since&gt;...&lt;until&gt;</code> param√©tert. Az unreleased commit-okat √≠gy tudom kilist√°zni:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --oneline 1.0.1...HEAD
b323e7d (HEAD -&gt; master, single-inst) Lint
73a4bcd Csak egy instance maradhat
bf4a37f Szkriptek src mapp√°ba (√°tl√°that√≥s√°g++)
</code></pre></div></div> <p>Az utols√≥ release adatait hasonl√≥an egyszer≈±en:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --oneline 1.0.0...1.0.1
7c1fdb0 (tag: 1.0.1, origin/master, origin/HEAD) Logger konfig itt jobb helyen van
e724f7e Glob√°lis install m≈±k√∂dik
</code></pre></div></div> <p>Azonban a legels≈ë release history-j√°t tr√ºkk√∂sebb lek√©rdezni - mit kell megadni a <code class="highlighter-rouge">&lt;since&gt;</code>-nek? Semmit? Nem:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --oneline ...1.0.0
b323e7d (HEAD -&gt; master, single-inst) Lint
73a4bcd Csak egy instance maradhat
bf4a37f Szkriptek src mapp√°ba (√°tl√°that√≥s√°g++)
7c1fdb0 (tag: 1.0.1, origin/master, origin/HEAD) Logger konfig itt jobb helyen van
e724f7e Glob√°lis install m≈±k√∂dik
</code></pre></div></div> <p>A <code class="highlighter-rouge">HEAD</code> √©s az els≈ë release k√∂zti commit-okat kaptam vissza, vagyis pont az ellenkez≈ëj√©t annak, amit szerettem volna.</p> <p>Rengeteget keresg√©ltem, de nem tal√°ltam szebb megold√°st ann√°l, minthogy lek√©rem a legels≈ë commit hash-t, √©s azt adom meg <code class="highlighter-rouge">&lt;since&gt;</code>-nek.</p> <p>A legels≈ë commit lek√©rdez√©s√©re 2 m√≥dszert tal√°ltam:</p> <ul> <li><code class="highlighter-rouge">git log --oneline | tail -1 | cut -d' ' -f 1</code></li> <li><code class="highlighter-rouge">git rev-list --max-parents=0 HEAD</code></li> </ul> <p>Behelyettes√≠tve a kor√°bbi parancsba m√°r megkapom az els≈ë release commit-jait:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --oneline `git log --oneline | tail -1 | cut -d' ' -f 1`...1.0.0
c8d7518 (tag: 1.0.0) Dependency update
e7e9abb K√©p URL fix
f4a4114 Feladatok, √∂tletek
3655263 Doksi
51c3039 Sleep konfigban, exit code
2f6669e F√°jlba ment√©s opcion√°lis, log level √°ll√≠that√≥
80d90db Lint
285f280 Iter√°ci√≥ m≈±k√∂dik
f929777 Sz√°mla f√°jlok let√∂lt√©se
d207817 Let√∂lt≈ë linkek parszol√°sa
39d0ae8 Sz√°mla kiv√°laszt√°s, f√°jlba ment√©s
f463a50 Sz√°mla alapadatok parszol√°sa
cd4e40e szamla_search_submit
2ebca86 Login, szamla_search
ff608c9 Logger
</code></pre></div></div> <p>Legal√°bbis majdnem. Ugyanis az intervallum alul nyitott, az <em>‚ÄúInitial commit‚Äù</em> kimaradt. Ezt explicit m√≥don kell majd ki√≠ratnom a changelog v√©g√©re:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --oneline | tail -1
5fa1938 Initial commit
</code></pre></div></div> <p>A fentiek automatiz√°l√°s√°hoz sz√ºks√©g van a release-ek list√°j√°ra is. Ezt az al√°bbi paranccsal k√©rdezhetem le:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git tag | sort -r
1.0.1
1.0.0
</code></pre></div></div> <p>A changelog akkor sz√©p, ha n√©mileg form√°zva van, erre egy t√∂k√©letes eszk√∂z a Markdown nyelv. A <em>‚ÄúChangelog‚Äù</em> felirat egy egyes szint≈± c√≠msor, m√≠g a release-ek m√°sodszint≈±ek lesznek. K√∂zt√ºk a commit-ok pedig felsorol√°sok. Ut√≥bbihoz a <code class="highlighter-rouge">--oneline</code> helyett saj√°t form√°tumot kell megadni a <code class="highlighter-rouge">git log</code>-nak:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --pretty="* %s" | tail -1
* Initial commit
</code></pre></div></div> <p>A <code class="highlighter-rouge">pretty</code> param√©terben haszn√°lhat√≥ v√°ltoz√≥kr√≥l <a href="https://git-scm.com/docs/pretty-formats">itt √≠rnak r√©szletesen</a>.</p> <h2 id="√∂sszekalap√°l√°s">√ñsszekalap√°l√°s</h2> <p>Algoritmus:</p> <ul> <li>UNTIL := ‚ÄúHEAD‚Äù</li> <li>V√©gig a release-eken: <ul> <li>SINCE := aktu√°lis release</li> <li>Release fejl√©c ki√≠r√°sa (UNTIL)</li> <li>Commitok ki√≠r√°sa SINCE‚Ä¶UNTIL tartom√°nyban</li> <li>UNTIL := SINCE</li> </ul> </li> <li>FIRST := legels≈ë commit</li> <li>Commitok ki√≠r√°sa FIRST‚Ä¶UNTIL tartom√°nyban</li> <li>FIRST commit ki√≠r√°sa</li> </ul> <p>Bash implement√°ci√≥:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

write-commits<span class="o">()</span> <span class="o">{</span>
	git log <span class="nt">--pretty</span><span class="o">=</span><span class="s2">"* %s"</span> <span class="nv">$1</span>
<span class="o">}</span>

write-release<span class="o">()</span> <span class="o">{</span>
	<span class="nv">SINCE</span><span class="o">=</span><span class="nv">$1</span><span class="p">;</span> <span class="nv">UNTIL</span><span class="o">=</span><span class="nv">$2</span>
	<span class="nb">printf</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">## </span><span class="nv">$UNTIL</span><span class="se">\n</span><span class="s2">"</span>
	write-commits <span class="nv">$SINCE</span>...<span class="nv">$UNTIL</span>
<span class="o">}</span>

main<span class="o">()</span> <span class="o">{</span>
	<span class="nb">echo</span> <span class="s2">"# Changelog"</span>
	<span class="nv">UNTIL</span><span class="o">=</span><span class="s2">"HEAD"</span>
	<span class="k">for </span>SINCE <span class="k">in</span> <span class="sb">`</span>git tag | <span class="nb">sort</span> <span class="nt">-r</span><span class="sb">`</span><span class="p">;</span> <span class="k">do
		</span>write-release <span class="nv">$SINCE</span> <span class="nv">$UNTIL</span>
		<span class="nv">UNTIL</span><span class="o">=</span><span class="nv">$SINCE</span>
	<span class="k">done
	</span><span class="nv">FIRST</span><span class="o">=</span><span class="sb">`</span>git log <span class="nt">--oneline</span> | <span class="nb">tail</span> <span class="nt">-1</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s1">' '</span> <span class="nt">-f</span> 1<span class="sb">`</span>
	write-release <span class="nv">$FIRST</span> <span class="nv">$UNTIL</span>
	write-commits <span class="nv">$FIRST</span>
<span class="o">}</span>

main
</code></pre></div></div> <p>Output:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./my-git-changelog.sh
<span class="gh"># Changelog</span>

<span class="gu">## HEAD</span>
<span class="p">
*</span> Lint
<span class="p">*</span> Csak egy instance maradhat
<span class="p">*</span> Szkriptek src mapp√°ba (√°tl√°that√≥s√°g++)

<span class="gu">## 1.0.1</span>
<span class="p">
*</span> Logger konfig itt jobb helyen van
<span class="p">*</span> Glob√°lis install m≈±k√∂dik

<span class="gu">## 1.0.0</span>
<span class="p">
*</span> Dependency update
<span class="p">*</span> K√©p URL fix
<span class="p">*</span> Feladatok, √∂tletek
<span class="p">*</span> Doksi
<span class="p">*</span> Sleep konfigban, exit code
<span class="p">*</span> F√°jlba ment√©s opcion√°lis, log level √°ll√≠that√≥
<span class="p">*</span> Lint
<span class="p">*</span> Iter√°ci√≥ m≈±k√∂dik
<span class="p">*</span> Sz√°mla f√°jlok let√∂lt√©se
<span class="p">*</span> Let√∂lt≈ë linkek parszol√°sa
<span class="p">*</span> Sz√°mla kiv√°laszt√°s, f√°jlba ment√©s
<span class="p">*</span> Sz√°mla alapadatok parszol√°sa
<span class="p">*</span> szamla_search_submit
<span class="p">*</span> Login, szamla_search
<span class="p">*</span> Logger
<span class="p">*</span> Initial commit
</code></pre></div></div> <p>A f√°jlba √≠r√°s pedig innen m√°r pofon egyszer≈±: <code class="highlighter-rouge">./my-git-changelog.sh &gt; CHANGELOG.md</code>.</p> <h2 id="epilog">EpiLog</h2> <p>Lehetne m√©g persze tuningolni azzal, hogy a release-ekhez d√°tumot is ki√≠rok, de most ezt nem teszem meg.</p> <p>Ahogy a bevezet≈ëben is eml√≠tettem, a <strong>j√≥ changelog NEM ez,</strong> amit most t√°koltam √∂ssze. Ugyanis nem, vagy csak nagyon <strong>nehezen der√ºl ki bel≈ële,</strong> hogy a felhaszn√°l√≥nak mire kell figyelnie, mire sz√°m√≠that - v√°ltozott-e az API, beker√ºlt-e √∫j feaure, jav√≠tva lett-e a hiba, amit≈ël kihullott a haja, etc. Ehelyett a fenti megold√°s kiprinteli m√©g a legesleg√©rdektelenebb commitot is, az <em>initial</em>-t‚Ä¶ ü§ì</p> </div> </div> <div class="row mt-3"> <div class="col text-center"> <script> if (!window.scripts) window.scripts = []; window.scripts = window.scripts.concat('https://connect.facebook.net/hu_HU/sdk.js#xfbml=1&version=v3.0'); </script> <div class="fb-like" data-href="https://juzraai.github.io/blog/2018/git-changelog-generalas/" data-layout="button_count" data-action="like" data-size="large" data-show-faces="false" data-share="true"></div> </div> </div> <div class="row my-5 border-top"> <div class="col-md-8 mt-3"> <big class="font-weight-normal text-dark"> <strong>Zsolt vagyok,</strong> full-stack fejleszt≈ë. </big> <br> Crawlereket, webalkalmaz√°sokat, statikus honlapokat √©s interakt√≠v vizualiz√°ci√≥kat k√©sz√≠tek. </div> <div class="col mt-3 small"> <ul class="list-unstyled d-flex d-md-block pl-md-3"> <li class="mr-3 mr-md-0"><a href="/projects/hu/" target="">Munk√°im</a></li> <li class="mr-3 mr-md-0"><a href="/blog/hu/" target="">Feljegyz√©seim</a></li> <li class="mr-3 mr-md-0"><a href="https://github.com/juzraai" target="_blank">GitHub</a></li> <li class="mr-3 mr-md-0"><a href="/contact/hu/" target="">Kontakt</a></li> </ul> </div> </div> <div class="row"> <div class="col mb-3 small text-center text-muted"> Copyright &copy; 2018 Zsolt Jur√°nyi | All rights reserved. </div> </div> </div> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js"></script> <script>$(function () { $('a[href^=http]').attr('target', '_blank'); })</script> <script> if (!window.scripts) window.scripts = []; window.scripts = window.scripts.concat('https://www.googletagmanager.com/gtag/js?id=UA-41050675-1'); window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-41050675-1', { 'anonymize_ip': true }); </script> <div id="cc" style="display:none"> <div class="c" onclick="ccClear()"></div> <div class="p"> <p> A honlap helyes m≈±k√∂d√©s√©hez √©s n√©mi statisztik√°hoz szeretn√©k s√ºtiket haszn√°lni. <a href="/privacy/hu/">R√©szletek</a> </p> <div class="r"> <a href="javascript:void(0)" onclick="ccDeny()">Elrejt√©s</a> <a class="b" href="javascript:void(0)" onclick="ccAllow()">Enged√©lyezem</a> </div> </div> </div> <script> /* js-cookie v2.2.0 */ !function(e){var n=!1;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(o){function t(n,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},t.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{/^[\{\[]/.test(c=JSON.stringify(r))&&(r=c)}catch(e){}r=o.write?o.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var s="";for(var f in i)i[f]&&(s+="; "+f,!0!==i[f]&&(s+="="+i[f]));return document.cookie=n+"="+r+s}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var l=p[u].split("="),C=l.slice(1).join("=");this.json||'"'!==C.charAt(0)||(C=C.slice(1,-1));try{var g=l[0].replace(d,decodeURIComponent);if(C=o.read?o.read(C,g):o(C,g)||C.replace(d,decodeURIComponent),this.json)try{C=JSON.parse(C)}catch(e){}if(n===g){c=C;break}n||(c[g]=C)}catch(e){}}return c}}return t.set=t,t.get=function(e){return t.call(t,e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}return n(function(){})}); function addClass(element, className) { element.className += ' ' + className; } function removeClass(element, className) { element.className = element.className.replace( new RegExp('( |^)' + className + '( |$)', 'g'), ' ').trim(); } var c = 'juzraai-cc-v1'; function ccInit() { var v = Cookies.get(c); var e = document.getElementById('cc'); if ('allow' == v) { e.style.display = 'none'; ccLoadScripts(); } else { if ('deny' == v) { addClass(e, 'small'); } else { removeClass(e, 'small'); } e.style.display = null; } } function ccAllow() { Cookies.set(c, 'allow', { expires: 365 }); ccInit(); } function ccClear() { Cookies.remove(c); ccInit(); } function ccDeny() { Cookies.set(c, 'deny', { expires: 7 }); ccInit(); } function ccLoadScripts() { if (!window.scripts) window.scripts = []; for (var i = 0; i < window.scripts.length; i++) { var script = document.createElement('script'); script.src = window.scripts[i]; document.body.appendChild(script); } } ccInit(); </script> </body> </html>
